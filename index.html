<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Pynt by rags</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Pynt</h1>
        <h2>A pynt of Python build.</h2>
        <a href="https://github.com/rags/pynt" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <p><a href="https://travis-ci.org/rags/pynt"><img src="https://travis-ci.org/rags/pynt.png?branch=master" alt="Build Status"></a></p>

<h1>
<a name="a-pynt-of-python-build-" class="anchor" href="#a-pynt-of-python-build-"><span class="octicon octicon-link"></span></a>A pynt of Python build. </h1>

<p><a href="https://github.com/rags">Raghunandan Rao</a></p>

<h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Easy to learn.</li>
<li>Build tasks are just python funtions.</li>
<li>Manages dependencies between tasks.</li>
<li>Automatically generates a command line interface.</li>
<li>Rake style param passing to tasks</li>
<li>Supports python 2.7 and python 3.x</li>
</ul><h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>You can install pynt from the Python Package Index (PyPI) or from source.</p>

<p>Using pip</p>

<div class="highlight"><pre><span class="nv">$ </span>pip install pynt
</pre></div>

<p>Using easy_install</p>

<div class="highlight"><pre><span class="nv">$ </span>easy_install pynt
</pre></div>

<h2>
<a name="example" class="anchor" href="#example"><span class="octicon octicon-link"></span></a>Example</h2>

<p>The build script is written in pure Python and pynt takes care of managing
any dependencies between tasks and generating a command line interface.</p>

<p>Writing build tasks is really simple, all you need to know is the <a href="https://github.com/task" class="user-mention">@task</a> decorator. Tasks are just regular Python 
functions marked with the <code>@task()</code> decorator. Dependencies are specified with <code>@task()</code> too. Tasks can be 
ignored with the <code>@task(ignore=True)</code>. Disabling a task is an useful feature to have in situations where you have one
task that a lot of other tasks depend on and you want to quickly remove it from the dependency chains of all the 
dependent tasks. </p>

<h2>
<a name="buildpy" class="anchor" href="#buildpy"><span class="octicon octicon-link"></span></a><strong>build.py</strong>
</h2>

<div class="highlight"><pre>
<span class="c">#!/usr/bin/python</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pynt</span> <span class="kn">import</span> <span class="n">task</span>

<span class="nd">@task</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">clean</span><span class="p">():</span>
    <span class="sd">'''Clean build directory.'''</span>
    <span class="k">print</span> <span class="s">'Cleaning build directory...'</span>

<span class="nd">@task</span><span class="p">(</span><span class="n">clean</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">html</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s">'.'</span><span class="p">):</span>
    <span class="sd">'''Generate HTML.'''</span>
    <span class="k">print</span> <span class="s">'Generating HTML in directory "</span><span class="si">%s</span><span class="s">"'</span> <span class="o">%</span>  <span class="n">target</span>

<span class="nd">@task</span><span class="p">(</span><span class="n">clean</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">images</span><span class="p">():</span>
    <span class="sd">'''Prepare images.'''</span>
    <span class="k">print</span> <span class="s">'Preparing images...'</span>

<span class="nd">@task</span><span class="p">(</span><span class="n">html</span><span class="p">,</span><span class="n">images</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">start_server</span><span class="p">(</span><span class="n">server</span><span class="o">=</span><span class="s">'localhost'</span><span class="p">,</span> <span class="n">port</span> <span class="o">=</span> <span class="s">'80'</span><span class="p">):</span>
    <span class="sd">'''Start the server'''</span>
    <span class="k">print</span> <span class="s">'Starting server at </span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">'</span> <span class="o">%</span> <span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>

<span class="nd">@task</span><span class="p">(</span><span class="n">start_server</span><span class="p">)</span> <span class="c">#Depends on task with all optional params</span>
<span class="k">def</span> <span class="nf">stop_server</span><span class="p">():</span>
    <span class="k">print</span> <span class="s">'Stopping server....'</span>

<span class="nd">@task</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">copy_file</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dest</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">'Copying from </span><span class="si">%s</span><span class="s"> to </span><span class="si">%s</span><span class="s">'</span> <span class="o">%</span> <span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>

<span class="nd">@task</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">echo</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">args</span>
    <span class="k">print</span> <span class="n">kwargs</span>

<span class="c"># Default task (if specified) is run when no task is specified in the command line</span>
<span class="c"># make sure you define the variable __DEFAULT__ after the task is defined</span>
<span class="c"># A good convention is to define it at the end of the module</span>
<span class="c"># __DEFAULT__ is an optional member</span>

<span class="n">__DEFAULT__</span><span class="o">=</span><span class="n">start_server</span>
</pre></div>

<h2>
<a name="running-pynt-tasks" class="anchor" href="#running-pynt-tasks"><span class="octicon octicon-link"></span></a><strong>Running pynt tasks</strong>
</h2>

<p>The command line interface and help is automatically generated. Task descriptions
are extracted from function docstrings.</p>

<div class="highlight"><pre><span class="nv">$ </span>pynt -h
usage: b <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-l<span class="o">]</span> <span class="o">[</span>-v<span class="o">]</span> <span class="o">[</span>-f file<span class="o">]</span> <span class="o">[</span>task <span class="o">[</span>task ...<span class="o">]]</span>

positional arguments:
  task                  perform specified task and all its dependencies

optional arguments:
  -h, --help            show this <span class="nb">help </span>message and <span class="nb">exit</span>
  -l, --list-tasks      List the tasks
  -v, --version         Display the version information
  -f file, --file file  Build file to <span class="nb">read </span>the tasks from. Default is
                        <span class="s1">'build.py'</span>
</pre></div>

<div class="highlight"><pre><span class="nv">$ </span>pynt -l
Tasks in build file ./build.py:
  clean                       Clean build directory.
  copy_file                   
  <span class="nb">echo                        </span>
<span class="nb">  </span>html                        Generate HTML.
  images           <span class="o">[</span>Ignored<span class="o">]</span>  Prepare images.
  start_server     <span class="o">[</span>Default<span class="o">]</span>  Start the server
  stop_server                 

Powered by pynt - A Lightweight Python Build Tool.
</pre></div>

<p>pynt takes care of dependencies between tasks. In the following case start_server depends on clean, html and image generation (image task is ignored).</p>

<div class="highlight"><pre><span class="nv">$ </span>pynt <span class="c">#Runs the default task start_server. It does exactly what "pynt start_server" would do.</span>
<span class="o">[</span> example.py - Starting task <span class="s2">"clean"</span> <span class="o">]</span>
Cleaning build directory...
<span class="o">[</span> example.py - Completed task <span class="s2">"clean"</span> <span class="o">]</span>
<span class="o">[</span> example.py - Starting task <span class="s2">"html"</span> <span class="o">]</span>
Generating HTML in directory <span class="s2">"."</span>
<span class="o">[</span> example.py - Completed task <span class="s2">"html"</span> <span class="o">]</span>
<span class="o">[</span> example.py - Ignoring task <span class="s2">"images"</span> <span class="o">]</span>
<span class="o">[</span> example.py - Starting task <span class="s2">"start_server"</span> <span class="o">]</span>
Starting server at localhost:80
<span class="o">[</span> example.py - Completed task <span class="s2">"start_server"</span> <span class="o">]</span>
</pre></div>

<p>The first few characters of the task name is enough to execute the task, as long as the partial name is unambigious. You can specify multiple tasks to run in the commandline. Again the dependencies are taken taken care of.</p>

<div class="highlight"><pre><span class="nv">$ </span>pynt cle ht cl
<span class="o">[</span> example.py - Starting task <span class="s2">"clean"</span> <span class="o">]</span>
Cleaning build directory...
<span class="o">[</span> example.py - Completed task <span class="s2">"clean"</span> <span class="o">]</span>
<span class="o">[</span> example.py - Starting task <span class="s2">"html"</span> <span class="o">]</span>
Generating HTML in directory <span class="s2">"."</span>
<span class="o">[</span> example.py - Completed task <span class="s2">"html"</span> <span class="o">]</span>
<span class="o">[</span> example.py - Starting task <span class="s2">"clean"</span> <span class="o">]</span>
Cleaning build directory...
<span class="o">[</span> example.py - Completed task <span class="s2">"clean"</span> <span class="o">]</span>
</pre></div>

<p>The 'html' task dependency 'clean' is run only once. But clean can be explicitly run again later.</p>

<p>pynt tasks can accept parameters from commandline.</p>

<div class="highlight"><pre><span class="nv">$ </span>pynt <span class="s2">"copy_file[/path/to/foo, path_to_bar]"</span>
<span class="o">[</span> example.py - Starting task <span class="s2">"clean"</span> <span class="o">]</span>
Cleaning build directory...
<span class="o">[</span> example.py - Completed task <span class="s2">"clean"</span> <span class="o">]</span>
<span class="o">[</span> example.py - Starting task <span class="s2">"copy_file"</span> <span class="o">]</span>
Copying from /path/to/foo to path_to_bar
<span class="o">[</span> example.py - Completed task <span class="s2">"copy_file"</span> <span class="o">]</span>
</pre></div>

<p>pynt can also accept keyword arguments.</p>

<div class="highlight"><pre><span class="nv">$ </span>pynt start<span class="o">[</span><span class="nv">port</span><span class="o">=</span>8888<span class="o">]</span>
<span class="o">[</span> example.py - Starting task <span class="s2">"clean"</span> <span class="o">]</span>
Cleaning build directory...
<span class="o">[</span> example.py - Completed task <span class="s2">"clean"</span> <span class="o">]</span>
<span class="o">[</span> example.py - Starting task <span class="s2">"html"</span> <span class="o">]</span>
Generating HTML in directory <span class="s2">"."</span>
<span class="o">[</span> example.py - Completed task <span class="s2">"html"</span> <span class="o">]</span>
<span class="o">[</span> example.py - Ignoring task <span class="s2">"images"</span> <span class="o">]</span>
<span class="o">[</span> example.py - Starting task <span class="s2">"start_server"</span> <span class="o">]</span>
Starting server at localhost:8888
<span class="o">[</span> example.py - Completed task <span class="s2">"start_server"</span> <span class="o">]</span>

<span class="nv">$ </span>pynt <span class="nb">echo</span><span class="o">[</span>hello,world,foo<span class="o">=</span>bar,blah<span class="o">=</span>123<span class="o">]</span>
<span class="o">[</span> example.py - Starting task <span class="s2">"echo"</span> <span class="o">]</span>
<span class="o">(</span><span class="s1">'hello'</span>, <span class="s1">'world'</span><span class="o">)</span>
<span class="o">{</span><span class="s1">'blah'</span>: <span class="s1">'123'</span>, <span class="s1">'foo'</span>: <span class="s1">'bar'</span><span class="o">}</span>
<span class="o">[</span> example.py - Completed task <span class="s2">"echo"</span> <span class="o">]</span>
</pre></div>

<h2>
<a name="organizing-build-scripts" class="anchor" href="#organizing-build-scripts"><span class="octicon octicon-link"></span></a><strong>Organizing build scripts</strong>
</h2>

<p>You can break up your build files into modules and simple import them into your main build file.</p>

<div class="highlight"><pre><span class="kn">from</span> <span class="nn">deploy_tasks</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">test_tasks</span> <span class="kn">import</span> <span class="n">functional_tests</span><span class="p">,</span> <span class="n">report_coverage</span>
</pre></div>

<h2>
<a name="contributorscontributing" class="anchor" href="#contributorscontributing"><span class="octicon octicon-link"></span></a>Contributors/Contributing</h2>

<ul>
<li>Calum J. Eadie - pynt is preceded by and forked from <a href="https://github.com/CalumJEadie/microbuild">microbuild</a>, which was created by <a href="https://github.com/CalumJEadie">Calum J. Eadie</a>.</li>
</ul><p>If you want to make changes the repo is at <a href="https://github.com/rags/pynt">https://github.com/rags/pynt</a>. You will need <a href="http://www.pytest.org">pytest</a> to run the tests</p>

<div class="highlight"><pre><span class="nv">$ </span>./b t
</pre></div>

<p>It will be great if you can raise a <a href="https://help.github.com/articles/using-pull-requests">pull request</a> once you are done.</p>

<p><em>If you find any bugs or need new features please raise a ticket in the <a href="https://github.com/rags/pynt/issues">issues section</a> of the github repo.</em></p>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>pynt is licensed under a <a href="http://opensource.org/licenses/MIT">MIT license</a></p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/rags/pynt/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/rags/pynt/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/rags/pynt"></a> is maintained by <a href="https://github.com/rags">rags</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>